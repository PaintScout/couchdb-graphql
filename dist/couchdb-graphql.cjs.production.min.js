"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n,e=require("tslib"),t=require("apollo-server-core"),r=(n=require("qs"))&&"object"==typeof n&&"default"in n?n.default:n,o=require("@graphql-modules/core");require("isomorphic-fetch");var s,i,a={typeDefs:t.gql(s||(s=e.__makeTemplateObject(["\n    scalar JSON\n\n    type Query\n    type Mutation\n  "],["\n    scalar JSON\n\n    type Query\n    type Mutation\n  "])))};function u(n){return n}function c(n){return e.__awaiter(this,void 0,void 0,(function(){var t,r;return e.__generator(this,(function(e){switch(e.label){case 0:return n.status>=200&&n.status<300?[2,n.json()]:[3,1];case 1:return t=new Error(n.statusText),r=t,[4,n.json()];case 2:throw r.response=e.sent(),t}}))}))}function l(n,t){return e.__awaiter(this,void 0,void 0,(function(){var r,o,s,i,a,u;return e.__generator(this,(function(l){switch(l.label){case 0:return[4,(o=(r=t.couchDb).fetch)((s=r.dbUrl)+"/"+(i=r.dbName)+"/_all_docs?conflicts=true&include_docs=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keys:n.map((function(n){return n._id}))})}).then(c).then((function(n){return n.rows.map((function(n){return n.doc})).filter((function(n){return!!n}))}))];case 1:return a=l.sent(),[4,o(s+"/"+i+"/_bulk_get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:a.reduce((function(n,t){return e.__spreadArrays(n,(t&&t._conflicts||[]).map((function(n){return{id:t._id,rev:n}})))}),[])})}).then(c).then((function(n){return n.results.map((function(n){return n.docs[0].ok})).filter((function(n){return!!n}))}))];case 2:return u=l.sent(),[2,a.reduce((function(t,r){var o;if(!t[r._id]){var s=a.find((function(n){return n._id===r._id}));t[r._id]={document:n.find((function(n){return n._id===r._id})),conflicts:[r],revToSave:s._rev}}var i=u.filter((function(n){return n._id===r._id}));return i?e.__assign(e.__assign({},t),((o={})[r._id]=e.__assign(e.__assign({},t[r._id]),{conflicts:e.__spreadArrays(t[r._id].conflicts,i)}),o)):t}),{})]}}))}))}function d(n,t){return e.__awaiter(this,void 0,void 0,(function(){var r,o,s,i,a,u,d,_,p,g,f,y=this;return e.__generator(this,(function(h){switch(h.label){case 0:return o=(r=t.couchDb).fetch,s=r.dbName,i=r.dbUrl,u=r.onConflictsResolved,(a=r.onResolveConflict)?[4,l(n,t)]:[2,null];case 1:return d=h.sent(),[4,Promise.all(Object.keys(d).map((function(n){return e.__awaiter(y,void 0,void 0,(function(){var r,o;return e.__generator(this,(function(s){switch(s.label){case 0:return[4,a({document:d[n].document,conflicts:d[n].conflicts,context:t})];case 1:return(r=s.sent())?(o=e.__rest(r,["_conflicts"]),[2,e.__assign(e.__assign({},o),{_rev:d[n].revToSave})]):[2]}}))}))}))).then((function(n){return n.filter((function(n){return!!n}))}))];case 2:return _=h.sent(),p=e.__spreadArrays(_,Object.keys(d).reduce((function(n,t){return e.__spreadArrays(n,d[t].conflicts.map((function(n){return e.__assign(e.__assign({},n),{_deleted:!0})})).filter((function(n){return n._rev!==d[t].revToSave})))}),[])),[4,o(i+"/"+s+"/_bulk_docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:p})}).then(c)];case 3:return g=h.sent(),f=g.filter((function(n){return n.ok})).map((function(n){return e.__assign(e.__assign({},p.find((function(e){return e._id===n.id}))),{_rev:n.rev,_id:n.id})})),u&&f.length>0&&u({documents:f,context:t}),[2,g]}}))}))}function _(n,t,r){var o;return void 0===r&&(r={}),e.__awaiter(this,void 0,void 0,(function(){var s,i,a,u,l,_,p,g,f,y,h,S,v,b,k=this;return e.__generator(this,(function(m){switch(m.label){case 0:if(i=(s=n.couchDb).fetch,l=s.onDocumentsSaved,_=r.upsert,g=void 0===(p=r.new_edits)||p,f=(a=s.dbUrl)+"/"+(u=s.dbName)+"/_bulk_docs",y=null!=(o=t._rev)?o:void 0,null===t._deleted&&delete t._deleted,!_)return[3,4];if(!t._id)throw Error("upsert option requires input to contain _id");m.label=1;case 1:return m.trys.push([1,3,,4]),[4,i(a+"/"+u+"/"+encodeURIComponent(t._id)).then(c)];case 2:return h=m.sent()._rev,y=h,[3,4];case 3:if(!(S=m.sent()).response||404!==S.response.status)throw S;return[3,4];case 4:return[4,i(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:[e.__assign(e.__assign({},t),{_rev:y})],new_edits:g})}).then(c).then((function(r){return e.__awaiter(k,void 0,void 0,(function(){var o,s;return e.__generator(this,(function(e){switch(e.label){case 0:return(o=Array.isArray(r)?r[0]:r)&&o.id&&"conflict"===o.error?[4,d([t],n)]:[3,2];case 1:if(s=e.sent()[0])return[2,s];e.label=2;case 2:return[2,o]}}))}))}))];case 5:if((v=m.sent())&&v.error)throw new Error(v.reason);return v?(b=e.__assign(e.__assign({},t),{_id:v.id,_rev:v.rev}),l&&l({documents:[b],context:n}),[2,b]):[2,null]}}))}))}function p(n,t,r){return void 0===r&&(r={}),e.__awaiter(this,void 0,void 0,(function(){var o,s,i,a,u,l,_,p,g,f,y,h,S,v=this;return e.__generator(this,(function(b){switch(b.label){case 0:return s=(o=n.couchDb).fetch,u=o.onDocumentsSaved,p=void 0===(_=r.new_edits)||_,g=(i=o.dbUrl)+"/"+(a=o.dbName)+"/_bulk_docs",f={},(l=r.upsert)?(y=t.map((function(n){return n._id})).filter((function(n){return!!n})),[4,s(i+"/"+a+"/_all_docs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keys:y})}).then(c)]):[3,2];case 1:b.sent().data.rows.forEach((function(n){f[n.id]=n.value?n.value.rev:null})),b.label=2;case 2:return[4,s(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:t.map((function(n){var t,r=e.__assign(e.__assign({},n),{_rev:(t=l&&n._id?f[n._id]:n._rev,null!=t?t:void 0)});return null===r._deleted&&delete r._deleted,r})),new_edits:p})}).then(c).then((function(r){return e.__awaiter(v,void 0,void 0,(function(){var o,s;return e.__generator(this,(function(e){switch(e.label){case 0:return(o=r.filter((function(n){return"conflict"===n.error}))).length>0?[4,d(t.filter((function(n){return o.find((function(e){return e.id===n._id}))})),n)]:[3,2];case 1:if(s=e.sent())return[2,r.map((function(n){var e=s.find((function(e){return e.id===n.id}));return"conflict"===n.error&&e?e:n}))];e.label=2;case 2:return[2,r]}}))}))}))];case 3:return h=b.sent(),S=h.map((function(n,r){var o=t[r],s=n.error?f[o._id]||o._rev:n.rev;return{_id:n.id,_rev:s,error:n.error,reason:n.reason,document:e.__assign(e.__assign({},o),{_id:n.id,_rev:s})}})),u&&u({documents:S.filter((function(n){return!n.error})).map((function(n){return n.document})),context:n}),[2,S]}}))}))}var g,f={__proto__:null,put:{__proto__:null,typeDefs:t.gql(i||(i=e.__makeTemplateObject(["\n  type PutResponse {\n    _id: String!\n    _rev: String\n    document: JSON\n  }\n\n  extend type Mutation {\n    put(input: JSON, upsert: Boolean, new_edits: Boolean): PutResponse\n  }\n"],["\n  type PutResponse {\n    _id: String!\n    _rev: String\n    document: JSON\n  }\n\n  extend type Mutation {\n    put(input: JSON, upsert: Boolean, new_edits: Boolean): PutResponse\n  }\n"]))),resolvers:{Mutation:{put:u((function(n,t,r,o){var s=t.input,i=t.upsert,a=t.new_edits,u=void 0===a||a;return e.__awaiter(void 0,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,_(r,s,{upsert:i,new_edits:u})];case 1:return[2,{_id:(n=e.sent())._id,_rev:n._rev,document:n}]}}))}))}))}}},bulkDocs:{__proto__:null,typeDefs:t.gql(g||(g=e.__makeTemplateObject(["\n  type BulkDocsResponseObject {\n    _id: String\n    _rev: String\n    document: JSON\n    error: String\n    reason: String\n  }\n\n  extend type Mutation {\n    bulkDocs(\n      input: [JSON!]!\n      upsert: Boolean\n      new_edits: Boolean\n    ): [BulkDocsResponseObject]\n  }\n"],["\n  type BulkDocsResponseObject {\n    _id: String\n    _rev: String\n    document: JSON\n    error: String\n    reason: String\n  }\n\n  extend type Mutation {\n    bulkDocs(\n      input: [JSON!]!\n      upsert: Boolean\n      new_edits: Boolean\n    ): [BulkDocsResponseObject]\n  }\n"]))),resolvers:{Mutation:{bulkDocs:u((function(n,e,t,r){var o=e.new_edits;return p(t,e.input,{upsert:e.upsert,new_edits:void 0===o||o})}))}}}};function y(n,t){void 0===t&&(t={});var o=t.keys,s=t.key,i=t.endkey,a=t.startkey,u=e.__rest(t,["keys","key","endkey","startkey"]);return e.__awaiter(this,void 0,void 0,(function(){var t,l;return e.__generator(this,(function(e){switch(e.label){case 0:return t=n.couchDb.fetch,l=n.couchDb.dbUrl+"/"+n.couchDb.dbName+"/_all_docs",u&&(l+="?"+r.stringify(u)),[4,t(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keys:o,key:s,endkey:i,startkey:a})}).then(c)];case 1:return[2,e.sent()]}}))}))}var h,S={__proto__:null,typeDefs:t.gql(h||(h=e.__makeTemplateObject(["\n  type AllDocsRow {\n    id: String!\n    rev: String\n    value: JSON\n    doc: JSON\n  }\n\n  type AllDocsResponse {\n    total_rows: Int!\n    offset: Int!\n    rows: [AllDocsRow!]!\n  }\n\n  extend type Query {\n    allDocs(\n      conflicts: Boolean\n      endkey: JSON\n      include_docs: Boolean\n      inclusive_end: Boolean\n      key: JSON\n      keys: [JSON!]\n      limit: Int\n      skip: Int\n      startkey: JSON\n      update_seq: Boolean\n    ): AllDocsResponse\n  }\n"],["\n  type AllDocsRow {\n    id: String!\n    rev: String\n    value: JSON\n    doc: JSON\n  }\n\n  type AllDocsResponse {\n    total_rows: Int!\n    offset: Int!\n    rows: [AllDocsRow!]!\n  }\n\n  extend type Query {\n    allDocs(\n      conflicts: Boolean\n      endkey: JSON\n      include_docs: Boolean\n      inclusive_end: Boolean\n      key: JSON\n      keys: [JSON!]\n      limit: Int\n      skip: Int\n      startkey: JSON\n      update_seq: Boolean\n    ): AllDocsResponse\n  }\n"]))),resolvers:{Query:{allDocs:u((function(n,e,t,r){return y(t,e)}))}}};function v(n,t,o){var s=(void 0===o?{}:o).revs;return e.__awaiter(this,void 0,void 0,(function(){var o,i,a;return e.__generator(this,(function(e){switch(e.label){case 0:return i=(o=t.couchDb).fetch,a=o.dbUrl+"/"+o.dbName+"/_bulk_get",s&&(a+="?"+r.stringify({revs:s})),[4,i(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docs:n,revs:s})}).then(c)];case 1:return[2,e.sent()]}}))}))}var b,k={__proto__:null,typeDefs:t.gql(b||(b=e.__makeTemplateObject(["\n  input BulkGetInput {\n    id: String!\n    rev: String\n  }\n\n  type BulkGetResponse {\n    results: [BulkGetResult!]!\n  }\n\n  type BulkGetResult {\n    id: String\n    docs: [BulkGetDocs!]!\n  }\n\n  type BulkGetDocs {\n    ok: JSON\n    error: BulkGetError\n  }\n\n  type BulkGetError {\n    id: String\n    rev: String\n    error: String\n    reason: String\n  }\n\n  extend type Query {\n    bulkGet(docs: [BulkGetInput!]!, revs: Boolean): BulkGetResponse\n  }\n"],["\n  input BulkGetInput {\n    id: String!\n    rev: String\n  }\n\n  type BulkGetResponse {\n    results: [BulkGetResult!]!\n  }\n\n  type BulkGetResult {\n    id: String\n    docs: [BulkGetDocs!]!\n  }\n\n  type BulkGetDocs {\n    ok: JSON\n    error: BulkGetError\n  }\n\n  type BulkGetError {\n    id: String\n    rev: String\n    error: String\n    reason: String\n  }\n\n  extend type Query {\n    bulkGet(docs: [BulkGetInput!]!, revs: Boolean): BulkGetResponse\n  }\n"]))),resolvers:{Query:{bulkGet:u((function(n,e,t,r){return v(e.docs,t,{revs:e.revs})}))}}};function m(n,t){return e.__awaiter(this,void 0,void 0,(function(){var o,s,i;return e.__generator(this,(function(e){switch(e.label){case 0:return o=n.couchDb.fetch,s=Object.keys(t).length>0,i=n+"/"+n+"/_changes",s&&(t.lastEventId&&(delete t.lastEventId,t["last-event-id"]=t.lastEventId),t.since&&"now"!==t.since&&(t.since=parseInt(t.since)),i+="?"+r.stringify(t)),[4,o(i).then(c)];case 1:return[2,e.sent()]}}))}))}var O,B={__proto__:null,typeDefs:t.gql(O||(O=e.__makeTemplateObject(["\n  type Change {\n    rev: String\n  }\n  type ChangesResult {\n    changes: [Change]\n    id: String\n    seq: JSON\n    doc: JSON\n    deleted: Boolean\n  }\n\n  type ChangesResponse {\n    last_seq: JSON\n    pending: Int\n    results: [ChangesResult]\n  }\n\n  extend type Query {\n    changes(\n      doc_ids: [String!]\n      conflicts: Boolean\n      descending: Boolean\n      feed: String\n      filter: String\n      heartbeat: Int\n      include_docs: Boolean\n      attachments: Boolean\n      att_encoding_info: Boolean\n      lastEventId: Int\n      limit: Int\n      since: String\n      timeout: Int\n      view: String\n      seq_interval: Int\n    ): ChangesResponse\n  }\n"],["\n  type Change {\n    rev: String\n  }\n  type ChangesResult {\n    changes: [Change]\n    id: String\n    seq: JSON\n    doc: JSON\n    deleted: Boolean\n  }\n\n  type ChangesResponse {\n    last_seq: JSON\n    pending: Int\n    results: [ChangesResult]\n  }\n\n  extend type Query {\n    changes(\n      doc_ids: [String!]\n      conflicts: Boolean\n      descending: Boolean\n      feed: String\n      filter: String\n      heartbeat: Int\n      include_docs: Boolean\n      attachments: Boolean\n      att_encoding_info: Boolean\n      lastEventId: Int\n      limit: Int\n      since: String\n      timeout: Int\n      view: String\n      seq_interval: Int\n    ): ChangesResponse\n  }\n"]))),resolvers:{Query:{changes:u((function(n,e,t,r){return m(t,e)}))}}};function w(n,t){return e.__awaiter(this,void 0,void 0,(function(){var r;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,(0,(r=n.couchDb).fetch)(r.dbUrl+"/"+r.dbName+"/_find",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(c)];case 1:return[2,e.sent()]}}))}))}function I(n,t,o){return void 0===o&&(o={}),e.__awaiter(this,void 0,void 0,(function(){var s,i,a,u,l,d;return e.__generator(this,(function(e){switch(e.label){case 0:return i=(s=n.couchDb).fetch,a=s.dbUrl,u=s.dbName,l=Object.keys(o).length>0,d=a+"/"+u+"/"+encodeURIComponent(t),l&&(d+="?"+r.stringify(o)),[4,i(d).then(c)];case 1:return[2,e.sent()]}}))}))}function N(n){return e.__awaiter(this,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,(0,(t=n.couchDb).fetch)(t.dbUrl+"/"+t.dbName).then(c)];case 1:return[2,e.sent()]}}))}))}function J(n,t){var o=t.view,s=t.ddoc,i=t.key,a=t.keys,u=e.__rest(t,["view","ddoc","key","keys"]);return e.__awaiter(this,void 0,void 0,(function(){var t,l,d,_,p,g;return e.__generator(this,(function(e){switch(e.label){case 0:return l=(t=n.couchDb).fetch,d={key:i,keys:a},_=t.dbUrl+"/"+t.dbName+"/_design/"+s+"/_view/"+o,u&&(_+="?"+r.stringify(u)),p=Object.keys(d).length>0,g={},p&&(g.method="POST",g.body=JSON.stringify(d),g.headers={Accept:"application/json","Content-Type":"application/json"}),[4,l(_,g).then(c)];case 1:return[2,e.sent()]}}))}))}function R(n,t){var r=t.index,o=t.ddoc,s=e.__rest(t,["index","ddoc"]);return e.__awaiter(this,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,(0,(t=n.couchDb).fetch)(t.dbUrl+"/"+t.dbName+"/_design/"+o+"/_search/"+r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(c)];case 1:return[2,e.sent()]}}))}))}var D,x,q,j,T,Q={__proto__:null,typeDefs:t.gql(D||(D=e.__makeTemplateObject(["\n  type FindResponse {\n    execution_stats: JSON\n    bookmark: String\n    warning: String\n    docs: [JSON!]\n  }\n\n  extend type Query {\n    find(\n      selector: JSON!\n      limit: Int\n      skip: Int\n      sort: Int\n      fields: [String!]\n      use_index: [String!]\n      r: Int\n      bookmark: String\n      update: Boolean\n      stable: Boolean\n      stale: String\n      execution_stats: Boolean\n    ): FindResponse\n  }\n"],["\n  type FindResponse {\n    execution_stats: JSON\n    bookmark: String\n    warning: String\n    docs: [JSON!]\n  }\n\n  extend type Query {\n    find(\n      selector: JSON!\n      limit: Int\n      skip: Int\n      sort: Int\n      fields: [String!]\n      use_index: [String!]\n      r: Int\n      bookmark: String\n      update: Boolean\n      stable: Boolean\n      stale: String\n      execution_stats: Boolean\n    ): FindResponse\n  }\n"]))),resolvers:{Query:{find:u((function(n,e,t,r){return w(t,e)}))}}},C={__proto__:null,typeDefs:t.gql(x||(x=e.__makeTemplateObject(["\n  type GetResponse {\n    _id: String!\n    _rev: String\n    document: JSON\n  }\n\n  extend type Query {\n    get(\n      id: String!\n      rev: String\n      revs: Boolean\n      revs_info: Boolean\n      open_revs: Boolean\n      conflicts: Boolean\n      attachments: Boolean\n      latest: Boolean\n    ): GetResponse\n  }\n"],["\n  type GetResponse {\n    _id: String!\n    _rev: String\n    document: JSON\n  }\n\n  extend type Query {\n    get(\n      id: String!\n      rev: String\n      revs: Boolean\n      revs_info: Boolean\n      open_revs: Boolean\n      conflicts: Boolean\n      attachments: Boolean\n      latest: Boolean\n    ): GetResponse\n  }\n"]))),resolvers:{Query:{get:u((function(n,t,r,o){return e.__awaiter(void 0,void 0,void 0,(function(){var n,o=t.id,s=e.__rest(t,["id"]);return e.__generator(this,(function(e){switch(e.label){case 0:return[4,I(r,o,s)];case 1:return[2,{_id:(n=e.sent())._id,_rev:n._rev,document:n}]}}))}))}))}}},G={__proto__:null,typeDefs:t.gql(q||(q=e.__makeTemplateObject(["\n  type Sizes {\n    file: Int\n    external: Int\n    active: Int\n  }\n\n  type Other {\n    data_size: Int\n  }\n\n  type Cluster {\n    q: Int\n    n: Int\n    w: Int\n    r: Int\n  }\n\n  type InfoResponse {\n    db_name: String\n    update_seq: String\n    sizes: Sizes\n    purge_seq: Int\n    other: Other\n    doc_del_count: Int\n    doc_count: Int\n    disk_size: Int\n    disk_format_version: Int\n    data_size: Int\n    compact_running: Boolean\n    cluster: Cluster\n    instance_start_time: Int\n  }\n\n  extend type Query {\n    info: InfoResponse\n  }\n"],["\n  type Sizes {\n    file: Int\n    external: Int\n    active: Int\n  }\n\n  type Other {\n    data_size: Int\n  }\n\n  type Cluster {\n    q: Int\n    n: Int\n    w: Int\n    r: Int\n  }\n\n  type InfoResponse {\n    db_name: String\n    update_seq: String\n    sizes: Sizes\n    purge_seq: Int\n    other: Other\n    doc_del_count: Int\n    doc_count: Int\n    disk_size: Int\n    disk_format_version: Int\n    data_size: Int\n    compact_running: Boolean\n    cluster: Cluster\n    instance_start_time: Int\n  }\n\n  extend type Query {\n    info: InfoResponse\n  }\n"]))),resolvers:{Query:{info:u((function(n,e,t){return N(t)}))}}},A={__proto__:null,typeDefs:t.gql(j||(j=e.__makeTemplateObject(["\n  type QueryResponse {\n    offset: Int\n    update_seq: JSON\n    total_rows: Int\n    rows: [QueryRow!]\n  }\n\n  type QueryRow {\n    id: String\n    key: JSON\n    value: JSON\n  }\n\n  extend type Query {\n    query(\n      ddoc: String!\n      view: String!\n      conflicts: Boolean\n      descending: Boolean\n      endkey: JSON\n      group: Boolean\n      group_level: Int\n      include_docs: Boolean\n      attachments: Boolean\n      att_encoding_info: Boolean\n      inclusive_end: Boolean\n      key: JSON\n      keys: [JSON!]\n      limit: Int\n      reduce: Boolean\n      skip: Int\n      sorted: Boolean\n      stable: Boolean\n      stale: String\n      startkey: JSON\n      update: String\n      update_seq: Boolean\n    ): QueryResponse\n  }\n"],["\n  type QueryResponse {\n    offset: Int\n    update_seq: JSON\n    total_rows: Int\n    rows: [QueryRow!]\n  }\n\n  type QueryRow {\n    id: String\n    key: JSON\n    value: JSON\n  }\n\n  extend type Query {\n    query(\n      ddoc: String!\n      view: String!\n      conflicts: Boolean\n      descending: Boolean\n      endkey: JSON\n      group: Boolean\n      group_level: Int\n      include_docs: Boolean\n      attachments: Boolean\n      att_encoding_info: Boolean\n      inclusive_end: Boolean\n      key: JSON\n      keys: [JSON!]\n      limit: Int\n      reduce: Boolean\n      skip: Int\n      sorted: Boolean\n      stable: Boolean\n      stale: String\n      startkey: JSON\n      update: String\n      update_seq: Boolean\n    ): QueryResponse\n  }\n"]))),resolvers:{Query:{query:u((function(n,t,r,o){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(n){return[2,J(r,t)]}))}))}))}}},P={__proto__:null,get:C,info:G,bulkGet:k,changes:B,search:{__proto__:null,typeDefs:t.gql(T||(T=e.__makeTemplateObject(["\n  type SearchResponse {\n    total_rows: Int!\n    bookmark: String!\n    rows: [SearchRow]!\n    counts: JSON\n  }\n\n  type SearchRow {\n    id: String!\n    order: [Int!]!\n    fields: JSON!\n    doc: JSON\n  }\n\n  extend type Query {\n    search(\n      index: String!\n      ddoc: String!\n      bookmark: String\n      counts: [String!]\n      drilldown: JSON\n      group_field: String\n      group_limit: Int\n      group_sort: JSON\n      highlight_fields: [String!]\n      highlight_pre_tag: String\n      highlight_post_tag: String\n      highlight_number: Int\n      highlight_size: Int\n      include_docs: Boolean\n      include_fields: [String!]\n      limit: Int\n      query: String!\n      ranges: JSON\n      sort: [String!]\n      stale: String\n    ): SearchResponse\n  }\n"],["\n  type SearchResponse {\n    total_rows: Int!\n    bookmark: String!\n    rows: [SearchRow]!\n    counts: JSON\n  }\n\n  type SearchRow {\n    id: String!\n    order: [Int!]!\n    fields: JSON!\n    doc: JSON\n  }\n\n  extend type Query {\n    search(\n      index: String!\n      ddoc: String!\n      bookmark: String\n      counts: [String!]\n      drilldown: JSON\n      group_field: String\n      group_limit: Int\n      group_sort: JSON\n      highlight_fields: [String!]\n      highlight_pre_tag: String\n      highlight_post_tag: String\n      highlight_number: Int\n      highlight_size: Int\n      include_docs: Boolean\n      include_fields: [String!]\n      limit: Int\n      query: String!\n      ranges: JSON\n      sort: [String!]\n      stale: String\n    ): SearchResponse\n  }\n"]))),resolvers:{Query:{search:u((function(n,t,r,o){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(n){return[2,R(r,t)]}))}))}))}}},find:Q,query:A,allDocs:S};exports.allDocs=y,exports.base=a,exports.bulkDocs=p,exports.bulkGet=v,exports.changes=m,exports.createContext=function(n){return{couchDb:e.__assign({fetch:fetch},n)}},exports.createCouchDbModule=function(n,t){var r=n.cloudant,s=e.__rest(n,["cloudant"]),i=e.__rest(P,["search"]),u=e.__spreadArrays([a.typeDefs],Object.keys(r?P:i).map((function(n){return P[n].typeDefs})),Object.keys(f).map((function(n){return f[n].typeDefs})));s.typeDefs&&(Array.isArray(s.typeDefs)?u.push.apply(u,s.typeDefs):u.push(s.typeDefs));var c=e.__spreadArrays(Object.keys(r?P:i).map((function(n){return P[n].resolvers})),Object.keys(f).map((function(n){return f[n].resolvers})));return s.resolvers&&(Array.isArray(s.resolvers)?c.push.apply(c,s.resolvers):c.push(s.resolvers)),new o.GraphQLModule(e.__assign(e.__assign({},s),{typeDefs:u,resolvers:c}),t)},exports.createResolver=u,exports.find=w,exports.get=I,exports.info=N,exports.mutations=f,exports.put=_,exports.queries=P,exports.query=J,exports.resolveConflicts=d,exports.search=R;
//# sourceMappingURL=couchdb-graphql.cjs.production.min.js.map
